/* jcemediabox - 2.1.1 | 2020-04-28 | https://www.joomlacontenteditor.net | Copyright (C) 2006 - 2020 Ryan Demmer. All rights reserved | GNU/GPL Version 2 or later - http://www.gnu.org/licenses/gpl-2.0.html */
if("undefined"===window.jQuery)throw new Error("JQuery is required to run Mediabox!");!function($){function scrollIntoView(el,pos){var supported="scrollBehavior"in document.documentElement.style;if(supported)try{return void $(el).get(0).scrollIntoView({block:"center"})}catch(e){}var boxCenter=$(el).offset().top+$(el).outerHeight(!0)/2,windowCenter=window.innerHeight/2;window.scrollTo(0,boxCenter-windowCenter)}var autoplayInterval,MediaBox={util:{},settings:{selector:".jcepopup, .wfpopup, [data-mediabox]",labels:{close:"Close",next:"Next",previous:"Previous"},autoplay:0},popups:[],items:[],activator:null,getSite:function(){var base=this.settings.base||"";if(base){var site=document.location.href,parts=site.split("://"),port=parts[0],url=parts[1];return url=url.indexOf(base)!==-1?url.substr(0,url.indexOf(base)):url.substr(0,url.indexOf("/"))||url,port+"://"+url+base}return null},init:function(settings){var self=this;$.extend(this.settings,settings),this.site=this.getSite(),self.create(),$(".jcetooltip, .jce_tooltip").each(function(){var text=$(this).attr("title")||"",title="";if(text.indexOf("::")!==-1){var parts=text.split("::");title=$.trim(parts[0]),text=$.trim(parts[1])}$(this).attr("title",text),window.UIkit?UIkit.tooltip(this,{title:text}):"undefined"!=typeof $.fn.tooltip&&$(".jcetooltip, .jce_tooltip").tooltip({title:text})})},getPopups:function(s,p){var selector=s||this.settings.selector;return $(selector,p)},translate:function(s){var o=this.settings,labels=o.labels;return s&&(s="{{"===s.substr(0,2)?s.replace(/\{\{(\w+?)\}\}/g,function(a,b){return labels[b]||a}):labels[s]||s),s},getStyles:function(o){var x=[];return o?($.each(o.split(";"),function(i,s){s=s.replace(/(.*):(.*)/,function(a,b,c){return'"'+b+'":"'+c+'"'}),x.push(s)}),$.parseJSON("{"+x.join(",")+"}")):{}},islocal:function(s){return!/^(\w+):\/\//.test(s)||new RegExp("^("+Env.url+")").test(s)},auto:function(){function makeID(src){var url=document.location.href,key=window.btoa(url+src);return key=key.replace(/[^\w]/g,""),key=key.substr(0,24)}var key,self=this;$(this.popups).each(function(i,el){if(el.auto)if("single"==el.auto){key=el.id||makeID(el.src);var cookie=MediaBox.Storage.get("wf_mediabox_"+key+"_"+i);cookie||(MediaBox.Storage.set("wf_mediabox_"+key+"_"+i,1),self.start(el))}else"multiple"==el.auto&&self.start(el)})},getData:function(n){var data,o={},re=/\w+\[[^\]]+\]/;if(data=$(n).attr("data-mediabox")||$(n).attr("data-json"))n.removeAttribute("data-json"),n.removeAttribute("data-mediabox"),re.test(data)&&(o=MediaBox.Parameter.parse(data));else{var rel=$(n).attr("rel");if(rel&&re.test(rel)){var args=[];return rel=rel.replace(/\b((\w+)\[(.*?)\])(;?)/g,function(a,b,c){return args.push(b),""}),o=MediaBox.Parameter.parse(args)||{},$(n).attr("rel",rel||o.rel||""),o}}var i,attrs=n.attributes;for(i=attrs.length-1;i>=0;i--){var attrName=attrs[i].name;if(attrName&&attrName.indexOf("data-mediabox-")!==-1){var attr=attrName.replace("data-mediabox-","");o[attr]=attrs[i].value}}return o},preloadMedia:function(){},process:function(el){var data,match,s=this.settings,o={},group="",auto=!1,src=el.getAttribute("href");if(src){src=src.replace(/b(w|h)=([0-9]+)/g,function(s,k,v){return k="w"===k?"width":"height",k+"="+v}),data=this.getData(el)||{};var title=data.title||el.title||"",caption=data.caption||"",type=data.type||el.type||"",rel=el.rel||"";if(!MediaBox.Env.iOS||!/\.pdf$/i.test(src)&&"pdf"!==type){if(!/\w+\[[^\]]+\]/.test(rel)){var rx="alternate|stylesheet|start|next|prev|contents|index|glossary|copyright|chapter|section|subsection|appendix|help|bookmark|nofollow|noopener|noreferrer|licence|tag|friend",lb="(lightbox([(.*?)])?)",lt="(lyte(box|frame|show)([(.*?)])?)";group=$.trim(rel.replace(new RegExp("(^|\\s+)"+rx+"|"+lb+"|"+lt+"(\\s+|$)","g"),"","gi"))}"AREA"==el.nodeName&&(data||(data=MediaBox.Parameter.parse(src)),group=group||"AREA_ELEMENT",data.type||(match=/\b(ajax|iframe|image|flash|director|shockwave|mplayer|windowsmedia|quicktime|realaudio|real|divx|pdf)\b/.exec(el.className))&&(data.type=match[0])),/autopopup-(single|multiple)/.test(el.className)&&(auto=/(multiple)/.test(el.className)?"multiple":"single"),auto=auto||data.autopopup||"",group=$(el).hasClass("nogroup")?"":group||data.group||"";var width=data.width||s.width,height=data.height||s.height;return $.each(["src","title","caption","group","width","height"],function(i,k){delete data[k]}),/!\D/.test(width)&&(width=parseInt(width)),/!\D/.test(height)&&(height=parseInt(height)),$.extend(o,{node:el,src:src,title:title,caption:caption,group:group,width:width,height:height,params:data,auto:auto,type:type}),src=src.replace(/&type=(ajax|text\/html|text\/xml)/,""),el.setAttribute("href",src),o}}},create:function(elements){var self=this,s=this.settings,pageload=!1;elements||(pageload=!0,this.popups=[],1===s.legacy&&MediaBox.Convert.legacy(),1===s.lightbox&&MediaBox.Convert.lightbox(),1===s.shadowbox&&MediaBox.Convert.shadowbox()),this.elements=elements||this.getPopups(),$(this.elements).removeClass("jcelightbox jcebox jcepopup").addClass("wfpopup").each(function(i){var o=self.process(this);if(!o)return!0;if(self.popups.push(o),pageload||(i=self.popups.length-1),"_blank"===$(this).attr("target")){var rel=$(this).attr("rel")||"";rel.indexOf("noopener")===-1&&(rel+=" noopener"),rel.indexOf("noreferrer")===-1&&(rel+=" noreferrer"),$(this).attr("rel",$.trim(rel))}if($(this).attr("class",function(i,v){return v.replace(/(zoom|icon)-(top|right|bottom|left|center)(-(top|right|bottom|left|center))?/,function(match,prefix,pos1,pos2){var str="wf-icon-zoom-"+pos1;return pos2&&(str+=pos2),str})}),1===s.icons&&!$(this).hasClass("noicon")){var $img=$("img:first",this);if($img.length){var styles={};$('<span class="wf-icon-zoom-image" />').html(function(){return MediaBox.getSVGIcon("search")}).insertAfter($img);var flt=$img.css("float");flt&&"none"!==flt&&($img.parent().css("float",flt),$img.css("float",""),$(this).addClass("wf-mediabox-has-float")),$.each(["top","right","bottom","left"],function(i,pos){var m=$img.css("margin-"+pos),p=$img.css("padding-"+pos);m&&/\d/.test(m)&&parseInt(m)>0&&$img.parent().css("margin-"+pos,m),p&&/\d/.test(p)&&parseInt(p)>0&&$img.parent().css("padding-"+pos,p)}),$img.css({margin:0,padding:0,float:"none"}),$img.parent().css(styles),$(this).addClass("wf-zoom-image")}else $('<span class="wf-icon-zoom-link" />').html(function(){return MediaBox.getSVGIcon("link")}).appendTo(this).find("svg").css("fill",$(this).css("color"))}$(this).on("click",function(e){return e.preventDefault(),o.src=this.getAttribute("href"),self.activator=this,self.start(o,i)})}),self.auto()},open:function(data,title,group,type,params){var i,x=0,o={};if("string"==typeof data&&$.extend(o,{src:data,title:title,group:group,type:type,params:params}),data.nodeName&&("A"===data.nodeName||"AREA"===data.nodeName))if(i=$.inArray(this.elements,data),i>=0)o=this.popups[i],x=i;else{var o=this.process(data);x=this.popups.push(o),x--}return this.start(o,x)},start:function(p,i){var len,self=this,n=0,items=[];if(this.build()){p.group?($.each(this.popups,function(x,o){o.group===p.group&&(len=items.push(o),i&&x===i&&(n=len-1))}),p.auto||"undefined"!=typeof i||(items.push(p),n=items.length-1)):items.push(p);var overlayDuration=$(".wf-mediabox-overlay").css("transition-duration");return overlayDuration=1e3*parseFloat(overlayDuration)||300,window.setTimeout(function(){return self.show(items,n)},overlayDuration),!0}},build:function(){var self=this,s=this.settings;if(0===$(".wf-mediabox").length){var $page=$('<div class="wf-mediabox" role="dialog" aria-modal="true" aria-labelledby="" aria-describedby="" tabindex="-1" />').appendTo("body");$page.addClass("wf-mediabox-overlay-transition"),MediaBox.Env.ie6&&$page.addClass("ie6"),MediaBox.Env.iOS&&$page.addClass("ios"),1===s.overlay&&$('<div class="wf-mediabox-overlay" tabindex="-1" />').appendTo($page).css("background-color",s.overlay_color),$page.append('<div class="wf-mediabox-frame" role="document" tabindex="-1"><div class="wf-mediabox-loader" role="status" aria-label="'+this.translate("loading")+'" tabindex="-1"></div><div class="wf-mediabox-body" aria-hidden="true" tabindex="-1" /></div>'),$page.addClass("wf-mediabox-theme-"+s.theme),MediaBox.Addons.Theme.parse(s.theme,function(s){return self.translate(s)},".wf-mediabox-body"),$(".wf-mediabox-frame").children().hide(),MediaBox.Env.iOS&&$(".wf-mediabox-content").css({webkitOverflowScrolling:"touch",overflow:"auto"}),2===s.close&&$(".wf-mediabox-frame").on("click",function(e){e.target&&e.target===this&&self.close()}),$(".wf-mediabox-close, .wf-mediabox-cancel").on("click",function(e){e.preventDefault(),self.close()}).attr("tabindex",0).attr("svg-icon",function(i,val){val&&$(this).append(MediaBox.getSVGIcon(val))}),$(".wf-mediabox-next").on("click",function(e){e.preventDefault(),self.nextItem()}).attr("tabindex",0).attr("svg-icon",function(i,val){val&&$(this).append(MediaBox.getSVGIcon(val))}),$(".wf-mediabox-prev").on("click",function(e){e.preventDefault(),self.previousItem()}).attr("tabindex",0).attr("svg-icon",function(i,val){val&&$(this).append(MediaBox.getSVGIcon(val))}),$(".wf-mediabox-numbers").data("html",$(".wf-mediabox-numbers").html()).attr("aria-hidden",!0),$page.addClass("wf-mediabox-open"),$(".wf-mediabox-overlay").css("opacity",s.overlayopacity||.8)}return!0},show:function(items,n){var s=this.settings;return this.items=items,this.bind(!0),$(".wf-mediabox-body").show(),1===s.overlay&&$(".wf-mediabox-overlay").length&&s.overlay_opacity&&$(".wf-mediabox-overlay").css("opacity",0).animate({opacity:parseFloat(s.overlay_opacity)},s.transition_speed),$(".wf-mediabox").addClass("wf-mediabox-transition-scale"),this.change(n)},bind:function(open){var self=this,s=this.settings;if(open){$(document).on("keydown.wf-mediabox",function(e){self.addListener(e)});var xDown,yDown;$(".wf-mediabox-body").on("touchstart",function(e){1===e.originalEvent.touches.length&&1!==self.items.length&&(xDown=e.originalEvent.touches[0].clientX,yDown=e.originalEvent.touches[0].clientY)}).on("touchmove",function(e){if(xDown&&yDown&&1===e.originalEvent.touches.length&&1!==self.items.length){var xUp=e.originalEvent.touches[0].clientX,yUp=e.originalEvent.touches[0].clientY,xDiff=xDown-xUp,yDiff=yDown-yUp;Math.abs(xDiff)>Math.abs(yDiff)&&(xDiff>0?self.nextItem():self.previousItem(),e.preventDefault()),xDown=null,yDown=null}})}else $(document).off("keydown.wf-mediabox"),$(".wf-mediabox").off("keydown.wf-mediabox");var resize=MediaBox.Tools.debounce(function(){var popup=self.items[self.index];popup&&self.updateBodyWidth(popup)},300);$(window).on("resize.wf-mediabox, orientationchange.wf-mediabox",resize),s.autoplay&&(autoplayInterval=setInterval(function(){self.nextItem()===!1&&clearInterval(autoplayInterval)},1e3*s.autoplay))},updateBodyWidth:function(popup){var w,h,ratio,ww=$(window).width(),wh=$(window).height(),fw=$(".wf-mediabox-frame").width(),fh=$(".wf-mediabox-frame").height();if("scroll"===this.settings.scrolling){var framePaddingLeft=$(".wf-mediabox-frame").css("padding-left"),framePaddingTop=$(".wf-mediabox-frame").css("padding-top");fw=ww-2*parseInt(framePaddingLeft),fh=wh-2*parseInt(framePaddingTop)}if(w=MediaBox.Tools.parseWidth(popup.width),h=MediaBox.Tools.parseHeight(popup.height||fh),$(".wf-mediabox-content").hasClass("wf-mediabox-content-ratio-flex")){var modh=$(".wf-mediabox-body").height()-$(".wf-mediabox-content").height();h=Math.min(h,fh),modh+=wh-h,$(".wf-mediabox-content-item").css("height","calc(100vh - "+modh+"px)")}var dim=MediaBox.Tools.resize(w,h,fw,fh),bw=dim.width;$(".wf-mediabox-body").css("max-width",bw);var bh=$(".wf-mediabox-body").height();ratio=fw>fh?(bw/bh).toFixed(1):(bh/bw).toFixed(1),bh>fh&&(bw=ratio*(fh-16),$(".wf-mediabox-body").css("max-width",bw))},addListener:function(e){switch(e.keyCode){case 27:this.close();break;case 37:this.previousItem();break;case 39:this.nextItem()}},queue:function(n){var self=this,changed=!1,callback=function(){if(!changed)return changed=!0,$(".wf-mediabox-body").removeClass("wf-mediabox-transition"),self.change(n)};callback()},nextItem:function(){if(1===this.items.length)return!1;var n=this.index+1;return!(n<0||n>=this.items.length)&&this.queue(n)},previousItem:function(){if(1===this.items.length)return!1;var n=this.index-1;return!(n<0||n>=this.items.length)&&this.queue(n)},info:function(){function processRe(h){return h=h.replace(ex,'<a href="mailto:$1" target="_blank">$1</a>'),h=h.replace(ux,'<a href="$1" target="_blank">$1</a>')}var popup=this.items[this.index];if($(".wf-mediabox-focus").removeClass("wf-mediabox-focus"),$("a[download]",".wf-mediabox-content").remove(),popup.params.download&&$('<a href="'+popup.src+'" target="_blank" download>'+this.translate("download")+"</a>").appendTo(".wf-mediabox-content"),$(".wf-mediabox-caption").length){var title=popup.title||"",text=popup.caption||"",h="",ex=/([-!#$%&\'\*\+\\.\/0-9=?A-Z^_`a-z{|}~]+@[-!#$%&\'\*\+\\/0-9=?A-Z^_`a-z{|}~]+\.[-!#$%&\'*+\\.\/0-9=?A-Z^_`a-z{|}~]+)/gi,ux=/([a-zA-Z]{3,9}:\/\/[^\s]+)/gi;if(title=MediaBox.Entities.decode(title),text=MediaBox.Entities.decode(text),title.indexOf("::")!==-1){var parts=title.split("::");title=$.trim(parts[0]),text=$.trim(parts[1])}title&&(h+='<h4 id="wf-mediabox-modal-title">'+title+"</h4>",$(".wf-mediabox").attr("aria-labelledby","wf-mediabox-modal-title")),text&&(h+='<p id="wf-mediabox-modal-description">'+text+"</p>",$(".wf-mediabox").attr("aria-describedby","wf-mediabox-modal-description")),$(".wf-mediabox-caption").html(h).addClass("wf-mediabox-caption-hidden"),h&&$(".wf-mediabox-caption").find(":not(a)").each(function(){var s=$(this).html();s&&/(@|:\/\/)/.test(s)&&(s=processRe(s))&&$(this).replaceWith(s)})}var self=this,len=this.items.length;if($(".wf-mediabox-numbers").length&&len>1){var html=$(".wf-mediabox-numbers").data("html")||"{{numbers}}";if(html.indexOf("{{numbers}}")!==-1){$(".wf-mediabox-numbers").empty().append("<ol />");for(var i=0;i<len;i++){var n=i+1,title=this.items[i].title||n,link=$('<button aria-label="'+title+'" tabindex="0" class="wf-mediabox-number" />').html(n);this.index===i&&$(link).addClass("active"),$("<li />").append(link).appendTo($("ol",".wf-mediabox-numbers")),$(link).on("click",function(e){var x=parseInt(e.target.innerHTML)-1;return self.index!=x&&self.queue(x)})}}html.indexOf("{{current}}")!==-1&&$(".wf-mediabox-numbers").html(html.replace("{{current}}",this.index+1).replace("{{total}}",len)),$(".wf-mediabox-numbers").attr("aria-hidden",!1)}else $(".wf-mediabox-numbers").empty().attr("aria-hidden",!0);$(".wf-mediabox-info-top, .wf-mediabox-info-bottom").show(),$(".wf-mediabox-next, .wf-mediabox-prev").hide().attr("aria-hidden",!0),len>1?(this.index>0?$(".wf-mediabox-prev").show().attr("aria-hidden",!1).addClass("wf-mediabox-focus"):$(".wf-mediabox-prev").hide().attr("aria-hidden",!0),this.index<len-1?$(".wf-mediabox-next").show().attr("aria-hidden",!1).addClass("wf-mediabox-focus"):$(".wf-mediabox-next").hide().attr("aria-hidden",!0)):$(".wf-mediabox-close").addClass("wf-mediabox-focus")},change:function(n){var popup,self=this;this.settings;if(n<0||n>=this.items.length)return!1;this.index=n,$(".wf-mediabox-container, .wf-mediabox-cancel").show(),$(".wf-mediabox").addClass("wf-mediabox-loading").find(".wf-mediabox-loader").attr("aria-hidden",!1),popup=this.items[n];var type="error",html="",plugin=MediaBox.Addons.Plugin.getPlugin(popup);return plugin&&(html=plugin.html(popup),type=plugin.type,!popup.width&&plugin.width&&(popup.width=plugin.width),!popup.height&&plugin.height&&(popup.height=plugin.height),popup.type=type),$(".wf-mediabox-content").attr("class","wf-mediabox-content").addClass("wf-mediabox-content-"+type).css("height",""),popup.html=html,this.items[n]=popup,self.setup(),!1},setup:function(){this.info(),MediaBox.Env.ie&&$(".wf-mediabox-content img").css("-ms-interpolation-mode","bicubic");var tabIndex=0;return $(".wf-mediabox").on("keydown.wf-mediabox",function(e){if(9===e.keyCode){e.preventDefault();var $items=$(".wf-mediabox").find("[tabindex]:visible").filter(function(){return parseInt(this.getAttribute("tabindex"))>=0});$items.each(function(i){$(this).hasClass("wf-mediabox-focus")&&(tabIndex=i)}),tabIndex=Math.max(tabIndex,0),e.shiftKey?tabIndex--:tabIndex++,tabIndex=Math.max(tabIndex,0),tabIndex===$items.length&&(tabIndex=0),$items.removeClass("wf-mediabox-focus"),$items.eq(tabIndex).focus().addClass("wf-mediabox-focus")}}),this.animate()},animate:function(){function itemLoaded(){if($cache.empty().remove(),"IFRAME"!==this.nodeName&&$(".wf-mediabox-content-item").html(popup.html),$(".wf-mediabox").removeClass("wf-mediabox-loading").find(".wf-mediabox-loading").attr("aria-hidden",!0),$(".wf-mediabox-content-item").css("padding-bottom",""),$(".wf-mediabox").addClass("wf-mediabox-show"),$(".wf-mediabox-info-top, .wf-mediabox-info-bottom").addClass("wf-info-show"),"IMG"===this.nodeName)cw=cw||this.naturalWidth||this.width,ch=ch||this.naturalHeight||this.height,cw=MediaBox.Tools.parseWidth(cw),ch=MediaBox.Tools.parseWidth(ch),popup.width=cw,popup.height=ch;else{if("VIDEO"===this.nodeName&&(cw=cw||this.videoWidth||0,ch=ch||this.videoHeight||0),cw=cw||640,cw&&ch){var w=MediaBox.Tools.parseWidth(cw),h=MediaBox.Tools.parseHeight(ch),ratio=parseFloat((h/w).toFixed(2));$(this).is(".wf-mediabox-iframe-video, .wf-mediabox-video, .wf-mediabox-audio")&&(ratio=.56),.75===ratio?$(".wf-mediabox-content").addClass("wf-mediabox-content-ratio-4by3"):.56!==ratio&&$(".wf-mediabox-content").addClass("wf-mediabox-content-ratio-flex")}$(".wf-mediabox-content-item").addClass("wf-mediabox-content-ratio"),popup.width=cw}if(self.updateBodyWidth(popup),"scroll"===s.scrolling&&($("body").addClass("wf-mediabox-scrolling"),scrollIntoView(".wf-mediabox-body")),$(".wf-mediabox-body").addClass("wf-mediabox-transition").attr("aria-hidden",!1),$(".wf-mediabox-focus").focus(),"IFRAME"===this.nodeName){var ifr=this;setTimeout(function(){ifr.contentWindow.focus()},10)}$(this).trigger("mediabox:load")}function itemError(){var n=this;$cache.empty().remove(),$(".wf-mediabox").removeClass("wf-mediabox-loading"),$(".wf-mediabox-content").addClass(function(){return"IMG"===n.nodeName?"wf-mediabox-broken-image":"wf-mediabox-broken-media"}),$(".wf-mediabox-body").addClass("wf-mediabox-transition").css("max-width","").attr("aria-hidden",!1),$(".wf-mediabox").addClass("wf-mediabox-show"),$(".wf-mediabox-content > div").addClass("wf-icon-404").html(function(){return MediaBox.getSVGIcon("404")})}var self=this,s=this.settings,popup=this.items[this.index],cw=popup.width||0,ch=popup.height||0;$(".wf-mediabox-content").removeClass("wf-mediabox-broken-image wf-mediabox-broken-media"),$(".wf-mediabox-content .wf-icon-404").removeClass("wf-icon-404").find("svg").remove(),$(".wf-mediabox-caption").removeClass("wf-mediabox-caption-hidden"),$(".wf-mediabox-content").hasClass("wf-mediabox-content-ajax")&&$(".wf-mediabox-body").css("max-width",640);var $cache=$('<div class="wf-mediabox-cache" />');"iframe"==popup.type||"ajax"==popup.type?$(".wf-mediabox-content-item").html(popup.html):$cache.html(popup.html).appendTo(".wf-mediabox"),$("img, video, audio, object, embed",$cache).add("iframe",".wf-mediabox-content").one("load loadedmetadata",function(e){var node=this;setTimeout(function(){itemLoaded.apply(node)},300)}).on("error",itemError)},close:function(keepopen){var self=this,transitionDuration=$(".wf-mediabox-container").css("transition-duration");transitionDuration=1e3*parseFloat(transitionDuration)||300,$(".wf-mediabox-body").removeClass("wf-mediabox-transition");var transitionTimer=setTimeout(function(){if($("iframe, video",".wf-mediabox-content-item").attr("src",""),$(".wf-mediabox-content-item").empty(),clearTimeout(transitionTimer),!keepopen){self.bind(!1),$(".wf-mediabox-info-bottom, .wf-mediabox-info-top").hide(),$(".wf-mediabox-frame").remove();var overlayDuration=$(".wf-mediabox-overlay").css("transition-duration");overlayDuration=1e3*parseFloat(overlayDuration)||300,$(".wf-mediabox").removeClass("wf-mediabox-open wf-mediabox-show"),$(".wf-mediabox-overlay").css("opacity",0);var overlayTimer=setTimeout(function(){$(".wf-mediabox").remove(),$("body").removeClass("wf-mediabox-scrolling"),clearTimeout(overlayTimer)},overlayDuration);self.activator&&$(self.activator).focus()}},transitionDuration);return $(".wf-mediabox-close").hide(),window.clearInterval(autoplayInterval),!1}};window.WfMediabox=window.jcepopup=MediaBox}(jQuery),function(){var opera,webkit,ie,ie6,gecko,mac,iDevice,Android,video,audio,nav=navigator,userAgent=nav.userAgent;opera=window.opera&&window.opera.buildNumber,webkit=/WebKit/.test(userAgent),ie=!webkit&&!opera&&/MSIE/gi.test(userAgent)&&/Explorer/gi.test(nav.appName),ie=ie&&/MSIE (\w+)\./.exec(userAgent)[1],ie6=ie&&!window.XMLHttpRequest,gecko=!webkit&&/Gecko/.test(userAgent),mac=userAgent.indexOf("Mac")!=-1,iDevice=/(iPad|iPhone)/.test(userAgent),Android=/Android/.test(userAgent),video=function(){var el=document.createElement("video"),o={};try{if(el.canPlayType){o.ogg=el.canPlayType('video/ogg; codecs="theora"');var h264='video/mp4; codecs="avc1.42E01E';return o.mp4=el.canPlayType(h264+'"')||el.canPlayType(h264+', mp4a.40.2"'),o.webm=el.canPlayType('video/webm; codecs="vp8, vorbis"'),o}}catch(e){}return!1}(),audio=function(){var el=document.createElement("audio"),o={};try{if(el.canPlayType)return o.ogg=el.canPlayType('audio/ogg; codecs="vorbis"'),o.mp3=el.canPlayType("audio/mpeg;"),o.wav=el.canPlayType('audio/wav; codecs="1"'),o.m4a=el.canPlayType("audio/x-m4a;")||el.canPlayType("audio/aac;"),o.webm=el.canPlayType('audio/webm; codecs="vp8, vorbis"'),o}catch(e){}return!1}();var Env={opera:opera,webkit:webkit,ie6:ie6,ie:ie,gecko:gecko,mac:mac,iOS:iDevice,android:Android,video:video,audio:audio};window.WfMediabox.Env=Env}(),function(){var entities={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;"},Entities={encode:function(str){return(""+str).replace(/[<>&\"\']/g,function(c){return entities[c]||c})},decode:function(str){var el;try{str=decodeURIComponent(str)}catch(e){}return el=document.createElement("div"),el.innerHTML=str,el.innerHTML||str}};window.WfMediabox.Entities=Entities}(),function($,Entities){var Parameter={parse:function(s){var a=[],x=[];if("string"==typeof s){if(/^\{[\w\W]+\}$/.test(s))return $.parseJSON(s);if(/\w+\[[^\]]+\]/.test(s)){var items=[];return $.each(s.split(";"),function(i,item){var matches=item.match(/([\w]+)\[([^\]]+)\]/);3==matches.length&&items.push('"'+matches[1]+'":"'+matches[2]+'"')}),$.parseJSON("{"+items.join(",")+"}")}s.indexOf("=")!==-1&&(s.indexOf("&")!==-1?x=s.split(/&(amp;)?/g):x.push(s))}return $.isArray(s)&&(x=s),$.each(x,function(i,n){n&&(n=n.replace(/^([^\[]+)(\[|=|:)([^\]]*)(\]?)$/,function(a,b,c,d){return d?/[^0-9]/.test(d)?'"'+b+'":"'+Entities.encode($.trim(d))+'"':'"'+b+'":'+parseInt(d):""}),n&&a.push(n))}),$.parseJSON("{"+a.join(",")+"}")}};window.WfMediabox.Parameter=Parameter}(jQuery,WfMediabox.Entities),function(){window.sessionStorage||(window.sessionStorage={getItem:function(sKey){return sKey&&this.hasOwnProperty(sKey)?unescape(document.cookie.replace(new RegExp("(?:^|.*;\\s*)"+escape(sKey).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*((?:[^;](?!;))*[^;]?).*"),"$1")):null},key:function(nKeyId){return unescape(document.cookie.replace(/\s*\=(?:.(?!;))*$/,"").split(/\s*\=(?:[^;](?!;))*[^;]?;\s*/)[nKeyId])},setItem:function(sKey,sValue){sKey&&(document.cookie=escape(sKey)+"="+escape(sValue)+"; path=/",this.length=document.cookie.match(/\=/g).length)},length:0,removeItem:function(sKey){sKey&&this.hasOwnProperty(sKey)&&(document.cookie=escape(sKey)+"=; path=/",this.length--)},hasOwnProperty:function(sKey){return new RegExp("(?:^|;\\s*)"+escape(sKey).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=").test(document.cookie)}},window.sessionStorage.length=(document.cookie.match(/\=/g)||window.sessionStorage).length);var Storage={get:function(n){return sessionStorage.getItem(n)},set:function(n,v){return sessionStorage.setItem(n,v)}};window.WfMediabox.Storage=Storage}(),function(){function _utf8_encode(string){string=string.replace(/\r\n/g,"\n");for(var utftext="",n=0;n<string.length;n++){var c=string.charCodeAt(n);c<128?utftext+=String.fromCharCode(c):c>127&&c<2048?(utftext+=String.fromCharCode(c>>6|192),utftext+=String.fromCharCode(63&c|128)):(utftext+=String.fromCharCode(c>>12|224),utftext+=String.fromCharCode(c>>6&63|128),utftext+=String.fromCharCode(63&c|128))}return utftext}function _utf8_decode(utftext){for(var string="",i=0,c=0,c1=0,c2=0;i<utftext.length;)c=utftext.charCodeAt(i),c<128?(string+=String.fromCharCode(c),i++):c>191&&c<224?(c1=utftext.charCodeAt(i+1),string+=String.fromCharCode((31&c)<<6|63&c1),i+=2):(c1=utftext.charCodeAt(i+1),c2=utftext.charCodeAt(i+2),string+=String.fromCharCode((15&c)<<12|(63&c1)<<6|63&c2),i+=3);return string}var _keyStr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",Base64={encode:function(input){var chr1,chr2,chr3,enc1,enc2,enc3,enc4,output="",i=0;for(input=_utf8_encode(input);i<input.length;)chr1=input.charCodeAt(i++),chr2=input.charCodeAt(i++),chr3=input.charCodeAt(i++),enc1=chr1>>2,enc2=(3&chr1)<<4|chr2>>4,enc3=(15&chr2)<<2|chr3>>6,enc4=63&chr3,isNaN(chr2)?enc3=enc4=64:isNaN(chr3)&&(enc4=64),output=output+_keyStr.charAt(enc1)+_keyStr.charAt(enc2)+_keyStr.charAt(enc3)+_keyStr.charAt(enc4);return output},decode:function(input){var chr1,chr2,chr3,enc1,enc2,enc3,enc4,output="",i=0;for(input=input.replace(/[^A-Za-z0-9\+\/\=]/g,"");i<input.length;)enc1=_keyStr.indexOf(input.charAt(i++)),enc2=_keyStr.indexOf(input.charAt(i++)),enc3=_keyStr.indexOf(input.charAt(i++)),enc4=_keyStr.indexOf(input.charAt(i++)),chr1=enc1<<2|enc2>>4,chr2=(15&enc2)<<4|enc3>>2,chr3=(3&enc3)<<6|enc4,output+=String.fromCharCode(chr1),64!=enc3&&(output+=String.fromCharCode(chr2)),64!=enc4&&(output+=String.fromCharCode(chr3));return output=_utf8_decode(output)}};window.btoa||(window.btoa=Base64.encode),window.atob||(window.atob=Base64.decode)}(),function($,Parameter){var Convert={legacy:function(){$("a[href]").each(function(){if(/com_jce/.test(this.href)){var p,s,img,oc=$(this).attr("onclick");if(oc){s=oc.replace(/&#39;/g,"'").split("'"),p=Parameter.parse(s[1]);var img=p.img||"",title=p.title||""}img&&(/http:\/\//.test(img)||("/"===img.charAt(0)&&(img=img.substr(1)),img=JCEMediaBox.site.replace(/http:\/\/([^\/]+)/,"")+img),$(this).attr({href:img,title:title.replace(/_/," "),onclick:""}),$(this).addClass("jcepopup"))}})},lightbox:function(){$("a[rel*=lightbox]").addClass("jcepopup").each(function(){var r=this.rel.replace(/lightbox\[?([^\]]*)\]?/,function(a,b){return b?"group["+b+"]":""});$(this).attr("rel",r)})},shadowbox:function(){$("a[rel*=shadowbox]").addClass("jcepopup").each(function(){var r=this.rel.replace(/shadowbox\[?([^\]]*)\]?/,function(a,b){var attribs="",group="";return b&&(group="group["+b+"]"),/;=/.test(a)&&(attribs=a.replace(/=([^;"]+)/g,function(x,z){return"["+z+"]"})),group&&attribs?group+";"+attribs:group||attribs||""});$(this).attr("rel",r)})}};window.WfMediabox.Convert=Convert}(jQuery,WfMediabox.Parameter),function($){function Addons(){var self=this;self.items=[],self.lookup={}}Addons.prototype={add:function(id,addOn){return this.items.push(addOn),this.lookup[id]={instance:addOn},addOn},get:function(name){return name&&this.lookup[name]?this.lookup[name].instance:this.lookup}},Addons.Plugin=new Addons,Addons.Theme=new Addons,Addons.Plugin.getPlugin=function(v,n){var s,r;return s=this.get(n),$.each(s,function(k,o){var p=o.instance,c=new p(v);if(c&&c.is(v))return r=c,!1}),r},Addons.Theme.parse=function(name,translate,parent){function createNode(o,el){$.each(o,function(k,v){if("string"==typeof v)v=translate(v),"text"===k?$(el).html(v):$(el).attr(k,v);else if($.isArray(v))createNode(v,el);else if("string"==typeof k){var node=document.createElement(k);$(el).append(node),createNode(v,node)}else createNode(v,el)})}var data,theme=this.get(name);if("function"!=typeof theme&&(theme=this.get("standard")),data=new theme)return parent||(parent=document.createElement("div")),translate||(translate=function(s){return s}),createNode(data,parent),parent},window.WfMediabox.Addons=Addons,window.WfMediabox.Plugin=Addons.Plugin,window.WfMediabox.Theme=Addons.Theme}(jQuery),function($){var svg={close:{standard:"M720.571 309.714q0 14.857-10.857 25.714l-103.429 103.429 103.429 103.429q10.857 10.857 10.857 25.714 0 15.429-10.857 26.286l-51.429 51.429q-10.857 10.857-26.286 10.857-14.857 0-25.714-10.857l-103.429-103.429-103.429 103.429q-10.857 10.857-25.714 10.857-15.429 0-26.286-10.857l-51.429-51.429q-10.857-10.857-10.857-26.286 0-14.857 10.857-25.714l103.429-103.429-103.429-103.429q-10.857-10.857-10.857-25.714 0-15.429 10.857-26.286l51.429-51.429q10.857-10.857 26.286-10.857 14.857 0 25.714 10.857l103.429 103.429 103.429-103.429q10.857-10.857 25.714-10.857 15.429 0 26.286 10.857l51.429 51.429q10.857 10.857 10.857 26.286zM941.714 438.857q0-119.429-58.857-220.286t-159.714-159.714-220.286-58.857-220.286 58.857-159.714 159.714-58.857 220.286 58.857 220.286 159.714 159.714 220.286 58.857 220.286-58.857 159.714-159.714 58.857-220.286z",squeeze:"M690.857 334.286l-83.429-83.429q-5.714-5.714-13.143-5.714t-13.143 5.714l-78.286 78.286-78.286-78.286q-5.714-5.714-13.143-5.714t-13.143 5.714l-83.429 83.429q-5.714 5.714-5.714 13.143t5.714 13.143l78.286 78.286-78.286 78.286q-5.714 5.714-5.714 13.143t5.714 13.143l83.429 83.429q5.714 5.714 13.143 5.714t13.143-5.714l78.286-78.286 78.286 78.286q5.714 5.714 13.143 5.714t13.143-5.714l83.429-83.429q5.714-5.714 5.714-13.143t-5.714-13.143l-78.286-78.286 78.286-78.286q5.714-5.714 5.714-13.143t-5.714-13.143zM813.714 438.857q0 84.571-41.714 156t-113.143 113.143-156 41.714-156-41.714-113.143-113.143-41.714-156 41.714-156 113.143-113.143 156-41.714 156 41.714 113.143 113.143 41.714 156zM941.714 438.857q0-119.429-58.857-220.286t-159.714-159.714-220.286-58.857-220.286 58.857-159.714 159.714-58.857 220.286 58.857 220.286 159.714 159.714 220.286 58.857 220.286-58.857 159.714-159.714 58.857-220.286z",shadow:""},next:{standard:"M798.286 438.857q0 15.429-10.286 25.714l-258.857 258.857q-10.286 10.286-25.714 10.286t-25.714-10.286l-52-52q-10.286-10.286-10.286-25.714t10.286-25.714l108-108h-286.857q-14.857 0-25.714-10.857t-10.857-25.714v-73.143q0-14.857 10.857-25.714t25.714-10.857h286.857l-108-108q-10.857-10.857-10.857-25.714t10.857-25.714l52-52q10.286-10.286 25.714-10.286t25.714 10.286l258.857 258.857q10.286 10.286 10.286 25.714zM941.714 438.857q0-119.429-58.857-220.286t-159.714-159.714-220.286-58.857-220.286 58.857-159.714 159.714-58.857 220.286 58.857 220.286 159.714 159.714 220.286 58.857 220.286-58.857 159.714-159.714 58.857-220.286z",squeeze:"M740.571 438.857q0-21.143-18.286-31.429l-310.857-182.857q-8.571-5.143-18.286-5.143-9.143 0-18.286 4.571-18.286 10.857-18.286 32v365.714q0 21.143 18.286 32 18.857 10.286 36.571-0.571l310.857-182.857q18.286-10.286 18.286-31.429zM813.714 438.857q0 84.571-41.714 156t-113.143 113.143-156 41.714-156-41.714-113.143-113.143-41.714-156 41.714-156 113.143-113.143 156-41.714 156 41.714 113.143 113.143 41.714 156zM941.714 438.857q0-119.429-58.857-220.286t-159.714-159.714-220.286-58.857-220.286 58.857-159.714 159.714-58.857 220.286 58.857 220.286 159.714 159.714 220.286 58.857 220.286-58.857 159.714-159.714 58.857-220.286z",shadow:"M25.714 7.428q-10.857-10.857-18.286-7.429t-7.429 18.286v841.143q0 14.857 7.429 18.286t18.286-7.429l405.714-405.714q5.143-5.143 7.429-10.857v405.714q0 14.857 7.429 18.286t18.286-7.429l405.714-405.714q10.857-10.857 10.857-25.714t-10.857-25.714l-405.714-405.714q-10.857-10.857-18.286-7.429t-7.429 18.286v405.714q-2.286-5.714-7.429-10.857z"},prev:{standard:"M795.429 402.286v73.143q0 14.857-10.857 25.714t-25.714 10.857h-286.857l108 108q10.857 10.857 10.857 25.714t-10.857 25.714l-52 52q-10.286 10.286-25.714 10.286t-25.714-10.286l-258.857-258.857q-10.286-10.286-10.286-25.714t10.286-25.714l258.857-258.857q10.286-10.286 25.714-10.286t25.714 10.286l52 52q10.286 10.286 10.286 25.714t-10.286 25.714l-108 108h286.857q14.857 0 25.714 10.857t10.857 25.714zM941.714 438.857q0-119.429-58.857-220.286t-159.714-159.714-220.286-58.857-220.286 58.857-159.714 159.714-58.857 220.286 58.857 220.286 159.714 159.714 220.286 58.857 220.286-58.857 159.714-159.714 58.857-220.286z",
squeeze:"M283.429 438.857q0-21.143 18.286-31.429l310.857-182.857q8.571-5.143 18.286-5.143 9.143 0 18.286 4.571 18.286 10.857 18.286 32v365.714q0 21.143-18.286 32-18.857 10.286-36.571-0.571l-310.857-182.857q-18.286-10.286-18.286-31.429zM210.286 438.857q0 84.571 41.714 156t113.143 113.143 156 41.714 156-41.714 113.143-113.143 41.714-156-41.714-156-113.143-113.143-156-41.714-156 41.714-113.143 113.143-41.714 156zM82.286 438.857q0-119.429 58.857-220.286t159.714-159.714 220.286-58.857 220.286 58.857 159.714 159.714 58.857 220.286-58.857 220.286-159.714 159.714-220.286 58.857-220.286-58.857-159.714-159.714-58.857-220.286z",shadow:"M925.143 870.286q10.857 10.857 18.286 7.429t7.429-18.286v-841.143q0-14.857-7.429-18.286t-18.286 7.429l-405.714 405.714q-5.143 5.143-7.429 10.857v-405.714q0-14.857-7.429-18.286t-18.286 7.429l-405.714 405.714q-10.857 10.857-10.857 25.714t10.857 25.714l405.714 405.714q10.857 10.857 18.286 7.429t7.429-18.286v-405.714q2.286 5.714 7.429 10.857z"},search:"M292.714 475.428q0 105.714 75.143 180.857t180.857 75.143 180.857-75.143 75.143-180.857-75.143-180.857-180.857-75.143-180.857 75.143-75.143 180.857zM0.143 0q0-29.714 21.714-51.429t51.429-21.714q30.857 0 51.429 21.714l196 195.429q102.286-70.857 228-70.857 81.714 0 156.286 31.714t128.571 85.714 85.714 128.571 31.714 156.286-31.714 156.286-85.714 128.571-128.571 85.714-156.286 31.714-156.286-31.714-128.571-85.714-85.714-128.571-31.714-156.286q0-125.714 70.857-228l-196-196q-21.143-21.143-21.143-51.429z",link:"M804.571 420.571v-182.857q0-68-48.286-116.286t-116.286-48.286h-475.429q-68 0-116.286 48.286t-48.286 116.286v475.429q0 68 48.286 116.286t116.286 48.286h402.286q8 0 13.143-5.143t5.143-13.143v-36.571q0-8-5.143-13.143t-13.143-5.143h-402.286q-37.714 0-64.571-26.857t-26.857-64.571v-475.429q0-37.714 26.857-64.571t64.571-26.857h475.429q37.714 0 64.571 26.857t26.857 64.571v182.857q0 8 5.143 13.143t13.143 5.143h36.571q8 0 13.143-5.143t5.143-13.143zM1024 914.286v-292.571q0-14.857-10.857-25.714t-25.714-10.857-25.714 10.857l-100.571 100.571-372.571-372.571q-5.714-5.714-13.143-5.714t-13.143 5.714l-65.143 65.143q-5.714 5.714-5.714 13.143t5.714 13.143l372.571 372.571-100.571 100.571q-10.857 10.857-10.857 25.714t10.857 25.714 25.714 10.857h292.571q14.857 0 25.714-10.857t10.857-25.714z",404:"M712 248.571q4.571-14.286-2.286-27.714t-21.143-18-28 2.286-18.286 21.714q-14.286 45.714-52.857 74t-86.571 28.286-86.571-28.286-52.857-74q-4.571-14.857-18-21.714t-27.714-2.286q-14.857 4.571-21.714 18t-2.286 27.714q21.143 69.143 78.857 111.429t130.286 42.286 130.286-42.286 78.857-111.429zM429.714 585.143q0-30.286-21.429-51.714t-51.714-21.429-51.714 21.429-21.429 51.714 21.429 51.714 51.714 21.429 51.714-21.429 21.429-51.714zM722.286 585.143q0-30.286-21.429-51.714t-51.714-21.429-51.714 21.429-21.429 51.714 21.429 51.714 51.714 21.429 51.714-21.429 21.429-51.714zM868.571 438.857q0 74.286-29.143 142t-78 116.571-116.571 78-142 29.143-142-29.143-116.571-78-78-116.571-29.143-142 29.143-142 78-116.571 116.571-78 142-29.143 142 29.143 116.571 78 78 116.571 29.143 142zM941.714 438.857q0-119.429-58.857-220.286t-159.714-159.714-220.286-58.857-220.286 58.857-159.714 159.714-58.857 220.286 58.857 220.286 159.714 159.714 220.286 58.857 220.286-58.857 159.714-159.714 58.857-220.286z"};window.WfMediabox.getSVGIcon=function(name,attribs){var $html=$('<svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 1024 1024"><g stroke="none" stroke-width="1"></g><path></path></svg>');$html.attr(attribs||{});var parts=name.split(":"),icon=parts[0],theme=parts[1]||"",data=svg[icon];return"object"==typeof data&&theme&&(data=data[theme]||""),data?($html.find("path").attr("d",data),$html.get(0).outerHTML):""}}(jQuery),function($){function now(){return(new Date).getTime()}var Tools={};Tools.debounce=function(func,wait,immediate){var timeout,args,context,timestamp,result,later=function(){var last=now()-timestamp;last<wait&&last>0?timeout=setTimeout(later,wait-last):(timeout=null,immediate||(result=func.apply(context,args),timeout||(context=args=null)))};return function(){context=this,args=arguments,timestamp=now();var callNow=immediate&&!timeout;return timeout||(timeout=setTimeout(later,wait)),callNow&&(result=func.apply(context,args),context=args=null),result}},Tools.resize=function(w,h,x,y){return w>x?(h*=x/w,w=x,h>y&&(w*=y/h,h=y)):h>y&&(w*=y/h,h=y,w>x&&(h*=x/w,w=x)),w=Math.round(w),h=Math.round(h),{width:Math.round(w),height:Math.round(h)}},Tools.parseWidth=function(w){return/%/.test(w)&&(w=Math.floor($(window).width()*parseInt(w)/100)),/\d/.test(w)&&(w=parseInt(w)),w},Tools.parseHeight=function(h){return/%/.test(h)&&(h=Math.floor($(window).height()*parseInt(h)/100)),/\d/.test(h)&&(h=parseInt(h)),h},window.WfMediabox.Tools=Tools}(jQuery),function($,WfMediabox){function islocal(s){return!/^([a-z]+)?:\/\//.test(s)||new RegExp("("+WfMediabox.site+")").test(s)}function parseURL(url){var o={};return url=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(url),$.each(["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],function(i,v){var s=url[i];s&&(o[v]=s)}),o}function buildURL(o){var url="";return o.protocol&&(url+=o.protocol+"://"),o.userInfo&&(url+=o.userInfo+"@"),o.host&&(url+=o.host),o.port&&(url+=":"+o.port),o.path&&(url+=o.path),o.query&&(url+="?"+o.query),o.anchor&&(url+="#"+o.anchor),url}function createObject(data,embed){delete data.group,delete data.title,delete data.caption,delete data.width,delete data.height;var attribs=["id","name","style","codebase","classid","type","data"],html='<object class="wf-mediabox-focus"';for(var n in data)attribs.indexOf(n)!==-1&&"string"==typeof data[n]&&(html+=" "+n+'="'+decodeURIComponent(data[n])+'"',delete data[n]);html+=">";for(var n in data)"string"==typeof data[n]&&(html+=' <param name="'+n+'" value="'+decodeURIComponent(data[n])+'" />');if(embed){html+="<embed";for(var n in data)"string"==typeof data[n]&&(html+=" "+n+'="'+decodeURIComponent(data[n])+'"');html+="></embed>"}return html+="</object>"}function createIframe(src,attribs){return'<iframe src="'+src+'" frameborder="0" scrolling="0" allowfullscreen="allowfullscreen" />'}WfMediabox.Plugin.add("flash",function(){this.type="object",this.html=function(data){return data.type="application/x-shockwave-flash",data.data=data.src,$(createObject(data,!0))},this.is=function(data){return/\.swf\b/.test(data.src)}}),WfMediabox.Plugin.add("video",function(){this.type="video",this.html=function(data){var n,attribs=['src="'+data.src+'"','class="wf-mediabox-video wf-mediabox-focus"'],params=data.params||{};for(n in params)attribs.push(n+'="'+params[n]+'"');params.autoplay||attribs.push("controls");var video=$("<video "+attribs.join(" ")+' tabindex="0" />').on("loadedmetadata",function(e){$(this).attr({width:this.videoWidth||"",height:this.videoHeight||""})});return video},this.is=function(data){var src=data.src;return src=src.split("?")[0],(/video\/(mp4|mpeg|webm|ogg)/.test(data.type)||/\.(mp4|webm|ogg)\b/.test(src))&&WfMediabox.Env.video}}),WfMediabox.Plugin.add("audio",function(){this.type="audio",this.html=function(data){var n,attribs=['src="'+data.src+'"','class="wf-mediabox-audio wf-mediabox-focus"'],params=data.params||{};for(n in params)attribs.push(n+'="'+params[n]+'"');return params.autoplay||attribs.push("controls"),$("<audio "+attribs.join(" ")+' tabindex="0" />')},this.is=function(data){var src=data.src;return src=src.split("?")[0],(/audio\/(mp3|mpeg|oga|x-wav)/.test(data.type)||/\.(mp3|oga|wav|m4a)\b/.test(src))&&WfMediabox.Env.audio}}),WfMediabox.Plugin.add("dailymotion",function(){function processURL(s){var u="https://dailymotion.com/embed/video/",m=s.match(/dai\.?ly(motion)?(.+)?\/(swf|video)?\/?([a-z0-9]+)_?/);return m&&(u+=m[4]),u}this.is=function(data){return/dai\.?ly(motion)/.test(data.src)},this.width=480,this.type="iframe",this.html=function(data){var ifr=$(createIframe(processURL(data.src)));return $(ifr).addClass("wf-mediabox-iframe-video"),ifr}}),WfMediabox.Plugin.add("quicktime",function(){this.html=function(data){return data.type="video/quicktime",data.classid="clsid:02bf25d5-8c17-4b23-bc80-d3488abddc6b",data.codebase="https://www.apple.com/qtactivex/qtplugin.cab#version=6,0,2,0",$(createObject(data))},this.type="object",this.width=853,this.is=function(data){return/\.(mov)\b/.test(data.src)}}),WfMediabox.Plugin.add("windowsmedia",function(){this.type="object",this.html=function(data){return data.type="application/x-mplayer2",data.classid="clsid:6bf52a52-394a-11d3-b153-00c04f79faa6",data.codebase="https://activex.microsoft.com/activex/controls/mplayer/en/nsmp2inf.cab#Version=5,1,52,701",$(createObject(data,!0))},this.is=function(data){return/\.(wmv|avi)\b/.test(data.src)}}),WfMediabox.Plugin.add("youtube",function(){function processURL(v){return v=v.replace(/youtu(\.)?be([^\/]+)?\/(.+)/,function(a,b,c,d){return d=d.replace(/(watch\?v=|v\/|embed\/)/,""),b&&!c&&(c=".com"),d.indexOf("?")===-1&&(d=d.replace(/&/,"?")),"youtube"+c+"/embed/"+d}),v=v.replace(/\/\/youtube/i,"//www.youtube"),v=v.replace(/^http:\/\//,"https://")}this.is=function(data){return/youtu(\.)?be([^\/]+)?\/(.+)/.test(data.src)},this.width=560,this.type="iframe",this.html=function(data){var src=processURL(data.src),ifr=$(createIframe(src));if(data.params){var allow=["accelerometer","encrypted-media","gyroscope","picture-in-picture","allowfullscreen"],params={};$.each(data.params,function(key,value){key.indexOf("youtube-")!==-1&&(key=key.replace("youtube-",""),params[key]=value,value&&allow.push(key))}),allow.length&&$(ifr).attr("allow",allow.join(";")),params=$.param(params),params&&(src+=src.indexOf("?")!==-1?"&"+params:"?"+params,$(ifr).attr("src",src))}return $(ifr).addClass("wf-mediabox-iframe-video"),ifr}}),WfMediabox.Plugin.add("vimeo",function(){function processURL(s){return s=s.replace(/(player[\/\.])?vimeo\.com\/(\w+\/)?(\w+\/)?([0-9]+)/,function(a,b,c,d,e){return b?a:"player.vimeo.com/video/"+e}),s=s.replace(/^http:\/\//,"https://")}this.is=function(data){return/vimeo\.com\/(\w+\/)?(\w+\/)?([0-9]+)/.test(data.src)},this.width=500,this.type="iframe",this.html=function(data){var src=processURL(data.src),ifr=$(createIframe(src));if($(ifr).addClass("wf-mediabox-iframe-video"),data.params){var params={};$.each(data.params,function(key,value){key.indexOf("vimeo-")!==-1&&(key=key.replace("vimeo-",""),params[key]=value)}),params=$.param(params),params&&(src+=src.indexOf("?")!==-1?"&"+params:"?"+params,$(ifr).attr("src",src))}return ifr}}),$(".wf-mediabox").on("WfMediabox:plugin",function(e,data){function isImage(data){var src=data.src;return src=src.split("?")[0],/image\/?/.test(data.type)||/\.(jpg|jpeg|png|apng|gif|bmp|tif|webp)$/i.test(src)}if(isImage(data)){var $img=$('<img src="'+data.src+'" class="wf-mediabox-img" alt="'+decodeURIComponent(data.alt||data.title||"")+'" tabindex="0" />');return data.params&&$.each(data.params,function(name,value){"srcset"===name&&(value=value.replace(/(?:[^\s]+)\s*(?:[\d\.]+[wx])?(?:\,\s*)?/gi,function(match){return islocal(match)?WfMediabox.site+match:match})),$img.attr(name,value)}),$img}return""}),WfMediabox.Plugin.add("image",function(){this.type="image",this.html=function(data){var $img=$('<img src="'+data.src+'" class="wf-mediabox-img" alt="'+decodeURIComponent(data.alt||data.title||"")+'" tabindex="0" />');return data.params&&$.each(data.params,function(name,value){"srcset"===name&&(value=value.replace(/(?:[^\s]+)\s*(?:[\d\.]+[wx])?(?:\,\s*)?/gi,function(match){return islocal(match)?WfMediabox.site+match:match})),$img.attr(name,value)}),$img},this.is=function(data){var src=data.src;return src=src.split("?")[0],/image\/?/.test(data.type)||/\.(jpg|jpeg|png|gif|bmp|tif|webp)$/i.test(src)}}),WfMediabox.Plugin.add("pdf",function(){this.type="iframe",this.html=function(data){var label=data.title||"PDF Iframe";return data.width=data.width||"100%",data.height=data.height||"100%",$('<iframe src="'+data.src+'" frameborder="0" aria-label="'+label+'" />')},this.is=function(data){return"pdf"===data.type||/\.pdf$/i.test(data.src)}}),WfMediabox.Plugin.add("content",function(){this.type="ajax",this.html=function(data){var src=data.src,uri=parseURL(src);islocal(src)&&(uri.query?uri.query.indexOf("tmpl=component")==-1&&(uri.query+="&tmpl=component"):uri.query="tmpl=component"),src=buildURL(uri),data.width=data.width||"100%",data.height=data.height||"100%";var iframe=$('<iframe src="'+src+'" />').on("mediabox:load",function(){var n=this,$parent=$(this).parent(),html=this.contentWindow.document.body.innerHTML;if($parent.append(html),uri.anchor){var elm=$parent.find("#"+uri.anchor).get(0);elm&&elm.scrollIntoView()}window.setTimeout(function(){$(n).remove()},10),$parent.find('a[href^="#"]').on("click",function(e){e.preventDefault();var id=$(this).attr("href"),elm=$parent.find(id).get(0);elm&&elm.scrollIntoView()}),WfMediabox.create(WfMediabox.getPopups("",$parent)),data.params&&data.params.style&&$('<style type="text/css" />').text(".wf-mediabox-content{"+$("<div />").attr("style",data.params.style).get(0).style.cssText+"}").insertBefore($parent)});return iframe},this.is=function(data){return"ajax"===data.type||"text/html"===data.type||$(data.node).hasClass("ajax")}}),WfMediabox.Plugin.add("dom",function(){this.type="dom",this.html=function(data){var node=$(data.src);return node?$(node).get(0).outerHTML:""},this.is=function(data){return"dom"===data.type}}),WfMediabox.Plugin.add("iframe",function(){this.type="iframe",this.html=function(data){var src=data.src,uri=parseURL(src);data.width=data.width||"100%",data.height=data.height||"100%",islocal(src)&&(uri.query?uri.query.indexOf("tmpl=component")==-1&&(uri.query+="&tmpl=component"):uri.query="tmpl=component"),src=buildURL(uri);var ifr=createIframe(src);return $(ifr)},this.is=function(data){return!data.type||"iframe"===data.type}})}(jQuery,WfMediabox),WfMediabox.Theme.add("bootstrap",function(){return[{div:{class:"wf-mediabox-container modal",content:[{div:{class:"modal-header",content:[{button:{type:"button",class:"close wf-mediabox-close",title:"{{close}}","aria-label":"{{close}}",content:[{span:{"aria-hidden":"true",text:"&times;"}}]},div:{class:"wf-mediabox-caption"}}]}},{div:{class:"wf-mediabox-content",content:[{nav:{class:"wf-mediabox-nav modal-body carousel",role:"navigation",content:[{a:{role:"button",class:"left carousel-control wf-mediabox-prev",title:"{{previous}}","aria-label":"{{previous}}",content:[{span:{"aria-hidden":"true",class:"glyphicon glyphicon-chevron-left"}}]}},{a:{role:"button",class:"right carousel-control wf-mediabox-next",title:"{{next}}","aria-label":"{{next}}",content:[{span:{"aria-hidden":"true",class:"glyphicon glyphicon-chevron-right"}}]}}]},div:{class:"wf-mediabox-content-item"}}]}}]}}]}),WfMediabox.Theme.add("light",function(){return[{div:{class:"wf-mediabox-container",content:[{div:{class:"wf-mediabox-content",content:[{div:{class:"wf-mediabox-content-item"}},{button:{class:"wf-mediabox-next",title:"{{next}}","aria-label":"{{next}}"}},{button:{class:"wf-mediabox-prev",title:"{{previous}}","aria-label":"{{previous}}"}}]}},{div:{class:"wf-mediabox-caption"}},{nav:{class:"wf-mediabox-nav",role:"navigation",content:[{button:{class:"wf-mediabox-close",title:"{{close}}","aria-label":"{{close}}",text:"{{close}}"}},{span:{class:"wf-mediabox-numbers",text:"{{numbers_count}}"}}]}}]}}]}),WfMediabox.Theme.add("shadow",function(){return[{div:{class:"wf-mediabox-info-top",content:[{div:{class:"wf-mediabox-caption"}}]}},{div:{class:"wf-mediabox-container",content:[{div:{class:"wf-mediabox-content",content:[{div:{class:"wf-mediabox-content-item"}}]}}]}},{div:{class:"wf-mediabox-info-bottom",content:[{div:{class:"wf-mediabox-nav",role:"navigation",content:[{span:{class:"wf-mediabox-numbers",text:"{{numbers}}"}},{button:{class:"wf-mediabox-close",title:"{{close}}","aria-label":"{{close}}"}},{button:{class:"wf-mediabox-next",title:"{{next}}","aria-label":"{{next}}","svg-icon":"next:shadow"}},{button:{class:"wf-mediabox-prev",title:"{{previous}}","aria-label":"{{previous}}","svg-icon":"prev:shadow"}}]}}]}}]}),WfMediabox.Theme.add("squeeze",function(){return[{div:{class:"wf-mediabox-container",content:[{button:{class:"wf-mediabox-close",title:"{{close}}","aria-label":"{{close}}","svg-icon":"close:squeeze"}},{div:{class:"wf-mediabox-content",content:[{div:{class:"wf-mediabox-content-item"}}]}},{div:{class:"wf-mediabox-caption"}},{nav:{class:"wf-mediabox-nav",role:"navigation",content:[{button:{class:"wf-mediabox-prev",title:"{{previous}}","aria-label":"{{previous}}","svg-icon":"prev:squeeze"}},{button:{class:"wf-mediabox-next",title:"{{next}}","aria-label":"{{next}}","svg-icon":"next:squeeze"}},{span:{class:"wf-mediabox-numbers",text:"{{numbers}}"}}]}}]}}]}),function($){$(".wf-mediabox").on("wf-mediabox:template",function(){})}(jQuery),WfMediabox.Theme.add("standard",function(){return[{div:{class:"wf-mediabox-container",content:[{div:{class:"wf-mediabox-content",content:[{div:{class:"wf-mediabox-content-item"}}]}},{div:{class:"wf-mediabox-caption"}},{nav:{class:"wf-mediabox-nav",role:"navigation",content:[{button:{class:"wf-mediabox-close",title:"{{close}}","aria-label":"{{close}}","svg-icon":"close:standard"}},{button:{class:"wf-mediabox-prev",title:"{{previous}}","aria-label":"{{previous}}","svg-icon":"prev:standard"}},{button:{class:"wf-mediabox-next",title:"{{next}}","aria-label":"{{next}}","svg-icon":"next:standard"}},{span:{class:"wf-mediabox-numbers",text:"{{numbers}}"}}]}}]}}]}),WfMediabox.Theme.add("uikit",function(){return[{div:{class:"wf-mediabox-container uk-modal-dialog uk-modal-dialog-lightbox uk-slidenav-position",content:[{a:{class:"wf-mediabox-close uk-modal-close uk-close uk-close-alt",role:"button",title:"{{close}}","aria-label":"{{close}}"}},{div:{class:"wf-mediabox-content uk-lightbox-content",content:[{nav:{role:"navigation",class:"wf-mediabox-nav",content:[{a:{class:"wf-mediabox-prev uk-slidenav uk-slidenav-contrast uk-slidenav-previous uk-hidden-touch",title:"{{previous}}","aria-label":"{{previous}}",role:"button"}},{a:{class:"wf-mediabox-next uk-slidenav uk-slidenav-contrast uk-slidenav-next uk-hidden-touch",title:"{{next}}","aria-label":"{{next}}",role:"button"}}]},div:{class:"wf-mediabox-content-item"}}]}},{div:{class:"wf-mediabox-caption uk-modal-caption"}}]}}]});