<?php
/**
 * SportsManagement ein Programm zur Verwaltung für alle Sportarten
 * @version    1.0.05
 * @package    Sportsmanagement
 * @subpackage player
 * @file       default_playercareer.php
 * @author     diddipoeler, stony, svdoldie und donclumsy (diddipoeler@gmx.de)
 * @copyright  Copyright: © 2013-2023 Fussball in Europa http://fussballineuropa.de/ All rights reserved.
 * @license    GNU General Public License version 2 or later; see LICENSE.txt
 */
defined('_JEXEC') or die('Restricted access');
use Joomla\CMS\Language\Text;
use Joomla\CMS\HTML\HTMLHelper;
use Joomla\CMS\Factory;

?>
<div class="<?php echo $this->divclassrow; ?> table-responsive" id="defaultplayercareer">
	<?php
	if (count($this->historyPlayer) > 0)
	{
		?>
        <!-- Player history START -->
        <h2><?php echo Text::_('COM_SPORTSMANAGEMENT_PERSON_PLAYING_CAREER'); ?></h2>

        <table id="playerhistory" class="<?PHP echo $this->config['history_table_class']; ?> table-responsive">
            <tr class="sectiontableheader">
                <th class="td_l">
					<?php echo
					Text::_('COM_SPORTSMANAGEMENT_PERSON_COMPETITION');
					?>
                </th>
                <th class="td_l">
					<?php
					echo Text::_('COM_SPORTSMANAGEMENT_PERSON_SEASON');
					?>
                </th>

				<?PHP
				if ($this->config['show_plcareer_team'])
				{
					?>
                    <th class="td_l">
						<?php
						echo Text::_('COM_SPORTSMANAGEMENT_PERSON_TEAM');
						?>
                    </th>
					<?PHP
				}


				if ($this->config['show_plcareer_ppicture'])
				{
					?>
                    <th class="td_l">
						<?php
						echo Text::_('COM_SPORTSMANAGEMENT_TEAMINFO_PLAYERS_PICTURE');
						?>
                    </th>
					<?PHP
				}

				?>
                <th class="td_l">
					<?php
					echo Text::_('COM_SPORTSMANAGEMENT_PERSON_POSITION');
					?>
                </th>
            </tr>
			<?php
			$k = 0;

			foreach ($this->historyPlayer AS $station)
			{
				$routeparameter                       = array();
				$routeparameter['cfg_which_database'] = Factory::getApplication()->input->getInt('cfg_which_database', 0);
				$routeparameter['s']                  = Factory::getApplication()->input->getInt('s', 0);
				$routeparameter['p']                  = $station->project_slug;
				$routeparameter['tid']                = $station->team_slug;
				$routeparameter['pid']                = $station->person_slug;

				$link1                                = sportsmanagementHelperRoute::getSportsmanagementRoute('player', $routeparameter);
				$routeparameter                       = array();
				$routeparameter['cfg_which_database'] = Factory::getApplication()->input->getInt('cfg_which_database', 0);
				$routeparameter['s']                  = Factory::getApplication()->input->getInt('s', 0);
				$routeparameter['p']                  = $station->project_slug;
				$routeparameter['tid']                = $station->team_slug;
				$routeparameter['ptid']               = 0;
				$link2                                = sportsmanagementHelperRoute::getSportsmanagementRoute('teaminfo', $routeparameter);


				?>
                <tr class="">
                    <td id="show_project_logo">
						<?php
						if ($this->config['show_project_logo'])
						{
							$station->project_picture = ($station->project_picture != '') ? $station->project_picture : sportsmanagementHelper::getDefaultPlaceholder("clublogobig");
							echo sportsmanagementHelperHtml::getBootstrapModalImage(
								'playercareerproject' . $station->project_id . '-' . $station->team_id,
								$station->project_picture,
								$station->project_name,
								$this->config['project_logo_height'],
								'',
								$this->modalwidth,
								$this->modalheight,
								$this->overallconfig['use_jquery_modal']
							);
						}

						echo HTMLHelper::link($link1, $station->project_name);
						?>
                        </td>
                    <td class="td_l">
						<?php
						echo $station->season_name;
						?>
                    </td>
					<?PHP
					if ($this->config['show_plcareer_team'])
					{
						?>
                        <td id="show_plcareer_team">
							<?php
							if ($this->config['show_team_logo'])
							{
								$station->club_picture = ($station->club_picture != '') ? $station->club_picture : sportsmanagementHelper::getDefaultPlaceholder("clublogobig");
								echo sportsmanagementHelperHtml::getBootstrapModalImage(
									'playercareerteam' . $station->project_id . '-' . $station->team_id,
									$station->club_picture,
									$station->team_name,
									$this->config['team_logo_height'],
									'',
									$this->modalwidth,
									$this->modalheight,
									$this->overallconfig['use_jquery_modal']
								);
							}

							if ($this->config['show_team_picture'])
							{
								$station->team_picture = ($station->team_picture != '') ? $station->team_picture : sportsmanagementHelper::getDefaultPlaceholder("team");
								echo sportsmanagementHelperHtml::getBootstrapModalImage(
									'playercareerteampicture' . $station->project_id . '-' . $station->team_id,
									$station->team_picture,
									$station->team_name,
									$this->config['team_picture_height'],
									'',
									$this->modalwidth,
									$this->modalheight,
									$this->overallconfig['use_jquery_modal']
								);
							}

							if ($this->config['show_playercareer_teamlink'])
							{
								echo HTMLHelper::link($link2, $station->team_name);
							}
							else
							{
								echo $station->team_name;
							}
							?>
                        </td>
						<?PHP
					}


					if ($this->config['show_plcareer_ppicture'])
					{
						?>
                        <td id="show_plcareer_ppicture">
							<?PHP
							$station->season_picture = ($station->season_picture != '') ? $station->season_picture : sportsmanagementHelper::getDefaultPlaceholder("team");
							echo sportsmanagementHelperHtml::getBootstrapModalImage(
								'playercareerperson' . $station->project_id . '-' . $station->team_id,
								$station->season_picture,
								$station->team_name,
								$this->config['plcareer_ppicture_height'],
								'',
								$this->modalwidth,
								$this->modalheight,
								$this->overallconfig['use_jquery_modal']
							);
							?>
                        </td>
						<?PHP
					}

					?>
                    <td class="td_l"><?php echo Text::_($station->position_name);
						?></td>
                </tr>
				<?php
				$k = (1 - $k);
			}
			?>
        </table>

        <!-- Player history END -->
		<?php
	}
	?>
</div>
